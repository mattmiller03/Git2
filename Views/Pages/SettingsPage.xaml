<Page x:Class="UiDesktopApp2.Views.Pages.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:viewModels="clr-namespace:UiDesktopApp2.ViewModels.Pages"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      mc:Ignorable="d"
      d:DataContext="{d:DesignInstance viewModels:SettingsViewModel}"
      Title="Settings">

    <Grid Style="{StaticResource PageContentGrid}">
        <ScrollViewer>
            <StackPanel Style="{StaticResource SectionStackPanel}">

                <!-- Page Title -->
                <TextBlock Text="Application Settings" 
                          Style="{StaticResource TitleTextBlockStyle}" />

                <!-- General Settings -->
                <ui:Card Style="{StaticResource SectionCard}">
                    <StackPanel Style="{StaticResource FormStackPanel}">
                        <TextBlock Text="General" 
                                  Style="{StaticResource SubtitleTextBlockStyle}" />

                        <TextBlock Text="Configure basic application preferences" 
                                  Style="{StaticResource BodyTextBlockStyle}" />

                        <Label Content="Application Theme:" 
                               Style="{StaticResource FormLabel}" />
                        <ComboBox x:Name="ThemeComboBox" 
                                 Style="{StaticResource FormComboBox}"
                                 SelectedIndex="0">
                            <ComboBoxItem Content="Dark" />
                            <ComboBoxItem Content="Light" />
                            <ComboBoxItem Content="Auto (System)" />
                        </ComboBox>

                        <Label Content="Default Timeout (seconds):" 
                               Style="{StaticResource FormLabel}" />
                        <ui:TextBox x:Name="TimeoutTextBox" 
                                   Text="300"
                                   Style="{StaticResource FormTextBox}" />

                        <CheckBox Content="Show confirmation dialogs" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Auto-save connection profiles" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Check for updates on startup" 
                                 IsChecked="False"
                                 Style="{StaticResource FormCheckBox}" />
                    </StackPanel>
                </ui:Card>

                <!-- Migration Defaults -->
                <ui:Card Style="{StaticResource SectionCard}">
                    <StackPanel Style="{StaticResource FormStackPanel}">
                        <TextBlock Text="Migration Defaults" 
                                  Style="{StaticResource SubtitleTextBlockStyle}" />

                        <TextBlock Text="Default settings for VM migrations" 
                                  Style="{StaticResource BodyTextBlockStyle}" />

                        <Label Content="Maximum Concurrent Migrations:" 
                               Style="{StaticResource FormLabel}" />
                        <ComboBox x:Name="ConcurrentMigrationsComboBox" 
                                 Style="{StaticResource FormComboBox}"
                                 SelectedIndex="2">
                            <ComboBoxItem Content="1" />
                            <ComboBoxItem Content="2" />
                            <ComboBoxItem Content="5" />
                            <ComboBoxItem Content="10" />
                        </ComboBox>

                        <Label Content="Default Migration Type:" 
                               Style="{StaticResource FormLabel}" />
                        <ComboBox x:Name="MigrationTypeComboBox" 
                                 Style="{StaticResource FormComboBox}"
                                 SelectedIndex="0">
                            <ComboBoxItem Content="Cold Migration" />
                            <ComboBoxItem Content="vMotion" />
                            <ComboBoxItem Content="Storage vMotion" />
                        </ComboBox>

                        <CheckBox Content="Power off VMs before migration (default)" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Create snapshots before migration (default)" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Validate compatibility before migration (default)" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Delete source VM after successful migration" 
                                 IsChecked="False"
                                 Style="{StaticResource FormCheckBox}" />
                    </StackPanel>
                </ui:Card>

                <!-- Logging Settings -->
                <ui:Card Style="{StaticResource SectionCard}">
                    <StackPanel Style="{StaticResource FormStackPanel}">
                        <TextBlock Text="Logging &amp; Diagnostics" 
                                  Style="{StaticResource SubtitleTextBlockStyle}" />

                        <TextBlock Text="Configure logging behavior and diagnostic information" 
                                  Style="{StaticResource BodyTextBlockStyle}" />

                        <Label Content="Log Level:" 
                               Style="{StaticResource FormLabel}" />
                        <ComboBox x:Name="LogLevelComboBox" 
                                 Style="{StaticResource FormComboBox}"
                                 SelectedIndex="1">
                            <ComboBoxItem Content="Error" />
                            <ComboBoxItem Content="Warning" />
                            <ComboBoxItem Content="Information" />
                            <ComboBoxItem Content="Debug" />
                            <ComboBoxItem Content="Verbose" />
                        </ComboBox>

                        <Label Content="Log File Location:" 
                               Style="{StaticResource FormLabel}" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ui:TextBox x:Name="LogPathTextBox" 
                                       Text="C:\Logs\VcMigration"
                                       Style="{StaticResource FormTextBox}"
                                       Grid.Column="0" />
                            <ui:Button Content="Browse..." 
                                      Style="{StaticResource SecondaryButton}"
                                      Grid.Column="1"
                                      Margin="8,4,0,12" />
                        </Grid>

                        <CheckBox Content="Enable detailed PowerShell logging" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Log PowerCLI commands" 
                                 IsChecked="False"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Auto-delete logs older than 30 days" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                            <ui:Button Content="Open Log Folder" 
                                      Style="{StaticResource SecondaryButton}" />
                            <ui:Button Content="Clear All Logs" 
                                      Style="{StaticResource DangerButton}" />
                        </StackPanel>
                    </StackPanel>
                </ui:Card>

                <!-- PowerShell Settings -->
                <ui:Card Style="{StaticResource SectionCard}">
                    <StackPanel Style="{StaticResource FormStackPanel}">
                        <TextBlock Text="PowerShell &amp; PowerCLI" 
                                  Style="{StaticResource SubtitleTextBlockStyle}" />

                        <TextBlock Text="Configure PowerShell execution and PowerCLI settings" 
                                  Style="{StaticResource BodyTextBlockStyle}" />

                        <Label Content="PowerCLI Configuration:" 
                               Style="{StaticResource FormLabel}" />
                        <CheckBox Content="Ignore invalid SSL certificates" 
                                 IsChecked="False"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Use default VIServer scope" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Display deprecation warnings" 
                                 IsChecked="True"
                                 Style="{StaticResource FormCheckBox}" />

                        <Label Content="Script Execution Timeout (minutes):" 
                               Style="{StaticResource FormLabel}" />
                        <ui:TextBox x:Name="ScriptTimeoutTextBox" 
                                   Text="60"
                                   Style="{StaticResource FormTextBox}" />

                        <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                            <ui:Button Content="Test PowerCLI Connection" 
                                      Style="{StaticResource SecondaryButton}" />
                            <ui:Button Content="Update PowerCLI" 
                                      Style="{StaticResource SecondaryButton}" />
                        </StackPanel>
                    </StackPanel>
                </ui:Card>

                <!-- Advanced Settings -->
                <ui:Card Style="{StaticResource SectionCard}">
                    <StackPanel Style="{StaticResource FormStackPanel}">
                        <TextBlock Text="Advanced" 
                                  Style="{StaticResource SubtitleTextBlockStyle}" />

                        <ui:InfoBar Title="Warning" 
                                   Message="Advanced settings should only be modified by experienced users"
                                   Style="{StaticResource WarningMessage}" 
                                   IsOpen="True" />

                        <Label Content="Connection Pool Size:" 
                               Style="{StaticResource FormLabel}" />
                        <ui:TextBox x:Name="ConnectionPoolTextBox" 
                                   Text="5"
                                   Style="{StaticResource FormTextBox}" />

                        <Label Content="API Retry Count:" 
                               Style="{StaticResource FormLabel}" />
                        <ui:TextBox x:Name="RetryCountTextBox" 
                                   Text="3"
                                   Style="{StaticResource FormTextBox}" />

                        <Label Content="Memory Limit (MB):" 
                               Style="{StaticResource FormLabel}" />
                        <ui:TextBox x:Name="MemoryLimitTextBox" 
                                   Text="1024"
                                   Style="{StaticResource FormTextBox}" />

                        <CheckBox Content="Enable debug mode" 
                                 IsChecked="False"
                                 Style="{StaticResource FormCheckBox}" />

                        <CheckBox Content="Enable experimental features" 
                                 IsChecked="False"
                                 Style="{StaticResource FormCheckBox}" />
                    </StackPanel>
                </ui:Card>

                <!-- Action Buttons -->
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Right" 
                           Margin="0,24,0,0">
                    <ui:Button Content="Reset to Defaults" 
                              Style="{StaticResource DangerButton}" />
                    <ui:Button Content="Import Settings" 
                              Style="{StaticResource SecondaryButton}" />
                    <ui:Button Content="Export Settings" 
                              Style="{StaticResource SecondaryButton}" />
                    <ui:Button Content="Apply" 
                              Style="{StaticResource PrimaryButton}" />
                </StackPanel>

                <!-- Status -->
                <ui:InfoBar x:Name="SettingsStatusInfo" 
                           Title="Settings Status" 
                           Message="Settings are up to date" 
                           Style="{StaticResource SuccessMessage}" 
                           IsOpen="False" />

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
